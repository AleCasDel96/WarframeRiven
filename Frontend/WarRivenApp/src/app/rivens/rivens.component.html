<div class="contenedor">
  <h2 class="titulo">Mis Rivens</h2>

  <div class="filtros">
    <a routerLink="/mis-ventas"><button>Ver mis ventas</button></a>
    <a routerLink="/historial"><button>Ver mi historial</button></a>

    <input [(ngModel)]="searchText" placeholder="Buscar por nombre" />
    <select [(ngModel)]="filtroArma">
      <option value="">Todas las armas</option>
      <option *ngFor="let arma of armasDisponibles" [value]="arma">{{ arma }}</option>
    </select>
  </div>

  <table class="tabla">
    <thead>
      <tr>
        <th (click)="ordenarPor('nombre')" style="cursor: pointer;">Nombre</th>
        <th (click)="ordenarPor('arma')" style="cursor: pointer;">Arma</th>
        <th>Polaridad</th>
        <th>Maestria</th>
        <th>Estad√≠sticas</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let r of rivens 
                  | filterBy: ['nombre']: searchText  
                  | filterBy: ['arma']: filtroArma 
                  | orderBy: [ [sortColumn, sortAsc ? 'asc' : 'desc'] ]
                  | paginate: { itemsPerPage: 5, currentPage: p }">
        <td>{{ r.nombre }}</td>
        <td>{{ r.arma }}</td>
        <td>{{ r.polaridad }}</td>
        <td>{{ r.maestria }}</td>
        <td>
          <div *ngIf="r.Atrib1">{{ r.Atrib1 }}: {{ r.valor1 }}</div>
          <div *ngIf="r.Atrib2">{{ r.Atrib2 }}: {{ r.valor2 }}</div>
          <div *ngIf="r.Atrib3">{{ r.Atrib3 }}: {{ r.valor3 }}</div>
          <div *ngIf="r.DAtrib">{{ r.DAtrib }}: {{ r.DValor }}</div>
        </td>
        <td>
          <button (click)="editar(r.id ?? '')">Editar</button>
          <button (click)="eliminar(r.id ?? '')">Eliminar</button>
          <button (click)="crearOferta(r)">Crear Oferta</button>
        </td>
      </tr>
    </tbody>
  </table>

  <pagination-controls (pageChange)="p = +$event"></pagination-controls>
</div>
